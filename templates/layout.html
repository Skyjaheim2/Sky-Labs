<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    <!-- BOOTSTRAP -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

    <!-- MATH QUILL -->
    <link rel="stylesheet" href="{{ url_for('static', filename = 'mathquill.css') }}">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="{{ url_for('static', filename = 'mathquill.js') }}"></script>


    <!-- KATEX   -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.css" integrity="sha384-D+9gmBxUQogRLqvARvNLmA9hS2x//eK1FhVb9PiU86gmcrBrJAQT8okdJ4LMp2uv" crossorigin="anonymous">
    <!-- The loading of KaTeX is deferred to speed up page rendering -->
    <script src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/katex.min.js" integrity="sha384-483A6DwYfKeDa0Q52fJmxFXkcPCFfnXMoXblOkJ4JcA8zATN6Tm78UNL72AKk+0O" crossorigin="anonymous"></script>
    <!-- To automatically render math in text elements, include the auto-render extension: -->
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.10.0-rc.1/dist/contrib/auto-render.min.js" integrity="sha384-yACMu8JWxKzSp/C1YV86pzGiQ/l1YUfE8oPuahJQxzehAjEt2GiQuy/BIvl9KyeF" crossorigin="anonymous"
            onload="renderMathInElement(document.body);"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            renderMathInElement(document.body, {
                // customised options
                // • auto-render specific keys, e.g.:
                delimiters: [
                    {left: '$$', right: '$$', display: true},
                    {left: '$', right: '$', display: false},
                    {left: '\\(', right: '\\)', display: false},
                    {left: '\\[', right: '\\]', display: true},
                    {left: '\\begin{equation}', right: '\\end{equation}', display: true}
                ],
                // • rendering keys, e.g.:
                throwOnError : false
            });
        });
    </script>


    <title>Title</title>
    {% block head %}
    {% endblock %}

</head>

<style>

    #mainHeading {
        text-align: center;
        font-family: 'Times New Roman', Times, serif;
        font-size: 35px;
        font-weight: bold;
    }
    #selectedSubjectTabHeading {
        font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
        font-size: 30px;
        font-weight: 400;
        /*margin-left: 20%;*/
        margin-bottom: 30px;
        margin-top: 20px;
    }
    .inputLabel {
        font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
        font-size: 18px;
        font-weight: 500;
    }
    .subject-tabs {
        height: 55px;
        background-color: #393737;
        margin-bottom: 0;
        padding-left: 19.4%;
    }
    .subject-tab-btn {
        border-radius: 15px;
        height: 50px;
    }
    .subject-topics {
        display: none;
        font-family: "Times New Roman", Symbola, serif;
        position: absolute;
        background-color: white;
        left: 275px;
        height: auto;
        width: 410px;
        /*width: auto;*/
        border: 1px solid #c7c7c7;
    }
    .subject-option-btn {
        width: 200px;
        margin: 2px;


    }
    .btn-secondary {
        position: relative;
        margin-top: 5px;
        font-family: "Times New Roman", Symbola, serif;
        background-color: #393737;
        border: none;
    }
    .symbols-container {
        background-color: #e0dddd;
        border-radius: 10px;
        height: 150px;
        margin-bottom: 20px;
        margin-top: 10px;
    }
    #sidebar {
        border-radius: 10px;
        background-color: #e0dddd;
        /*position: absolute;*/
        /*top: 32%;*/

    }
    .topics-btn {
        /*width: 200px;*/
        font-family: Cambria, Cochin, Georgia, Times, 'Times New Roman',serif;
        /*font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;*/
        padding: 5px 10px;
        margin-left: 10px;
        margin-right: 10px;
        border: none;
        /*border-top: 1px solid darkgray;*/
        font-size: 15px;
        background-color: #e0dddd;

    }
    .extension-topics-container {
        background-color: #e0dddd;
    }
    .symbol-btn {
        margin: 5px;
    }
    .topic-extension-item {
        text-decoration: none;
        color: black;
        cursor: pointer;
    }
    .topic-extension-item:hover {
        color: black;
    }
    .topic-extension-heading {
        font-family: "Times New Roman", Symbola, serif;
        color: #848484;
        /*font-weight: 0;*/
        /*font-size: 30px;*/
        /*font-weight: 350;*/
    }
    .heading-container {
        width: 100%;
    }
    .subject-heading-container {
        width: 100%;
        margin-left: 10px;
    }
    .sidebar-container {
        margin-left: 10px;
        /*padding: 10px;*/

    }
    .container-1 {
        display: flex;
        flex-wrap: wrap;
    }
    .container-2 {
        margin-left: 5%;
        width: 805px;

    }
    /* STEPS */
    .main-container {
        /*margin-left: 20%;*/
        /*margin-right: 20%;*/
    }
    .results-container {
        font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
        font-size: 15px;
        background-color: rgba(226, 226, 226, 0.45);
        /*height: 500px;*/
        border-radius: 15px;
        /*font-size: 30px;*/
        padding: 20px;
    }
    #finalSolutionHeading {
        font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
        font-size: 17px;
        margin-bottom: 20px;
    }
    .final-result {
        font-size: 20px;
    }
    .steps-heading {
        display: none;
        margin-top: 10px;
        font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
        font-size: 25px;
        font-weight: 600;
    }
    .steps-container {
        background-color: white;
        padding: 10px;
        border-radius: 10px;
        /*height: 400px;*/
    }
    .step-description {
        background-color: rgba(226, 226, 226, 0.45);
        /*font-family: "Times New Roman", Symbola, serif;*/
        /*font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;*/
        font-size: 15px;
        padding: 5px;
        border-radius: 10px;
        margin-bottom: 8px;
        /*margin-top: 50px;*/
    }
    .katex {
        /*font-family: "Times New Roman", Symbola, serif;*/
        /*font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;*/
        font-family: 'Computer Modern',serif;
    }
    .expandable-step-container {
        background-color: rgba(215, 213, 213, 0.45);
        font-family: "Times New Roman", Symbola, serif;
        font-size: 15px;
        padding: 5px;
        border-radius: 10px;
        margin-top: 0;
        margin-bottom: 0;

    }
    .show-steps-span {
        font-family: "Times New Roman", Symbola, serif;
        font-size: 16px;
        float: right;
        cursor: pointer;
    }
    .show-steps-icon {
        width: 25px;
        height: 25px;
    }
    .expanded-step-heading {
        margin-top: 11px;
    }
    .expandable-step-solution-container {
        /*animation-name: stepExpanded;*/
        /*animation-delay: 0.5s;*/
        /*animation-duration: 1s;*/
        /*animation-fill-mode: forwards;*/
        /*display: none;*/
        overflow: hidden;
        border-radius: 10px;
        margin-top: 3px;
        margin-bottom: 3px;
        height: 0;
    }
    .step-info {
        margin-top: 10px;
        margin-bottom: 15px;
    }
    .final-step {
        font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
        font-size: 17px;
        font-weight: 600;
        margin-top: 10px;
    }
    @keyframes stepExpanded {
        from {
            height: 0;
            padding: 0;
            box-shadow: none;
        }
        to {
            height: 300px;
            padding: 10px;
            box-shadow: 0 0 3px 3px rgba(0, 0, 0, 0.5);
        }

    }
    @keyframes stepCollapsed {
        from {
            height: 300px;
            padding: 10px;
            box-shadow: 0 0 3px 3px rgba(0, 0, 0, 0.5);
        }
        to {
            height: 0;
            padding: 0;
            box-shadow: none;
            /*padding-top: 40px;*/
        }
    }
</style>
{% block style %}
{% endblock %}
<body>

    <div class="container-1">

        <div class="heading-container">
            <div id="mainHeading"><span style="color: #007bff">Sky</span>Labs</div>

            <div class="subject-tabs">
                <div class="btn-group">
                    <button id="algebraSubjectTabBtn" class="btn btn-secondary subject-tab-btn" data-subject="algebra">Algebra</button>
                    <button id="discreteMathSubjectTabBtn" class="btn btn-secondary subject-tab-btn" data-subject="discreteMath">Discrete Math</button>
                    <button id="calculusSubjectTabBtn" class="btn btn-secondary subject-tab-btn" data-subject="calculus">Calculus</button>
                    <button id="probabilitySubjectTabBtn" class="btn btn-secondary subject-tab-btn" data-subject="probability">Probability</button>
                    <button id="physicsSubjectTabBtn" class="btn btn-secondary subject-tab-btn" data-subject="physics">Physics</button>
                </div>

            </div>

            <!--        <div class="subject-topics"><button class="btn btn-light subject-option-btn">Basic Operation</button><button class="btn btn-light subject-option-btn">Equations</button><button class="btn btn-light subject-option-btn">Summation</button><button class="btn btn-light subject-option-btn">Pi (Product) Notation</button><button class="btn btn-light subject-option-btn">Polynomials</button></div>-->
            <div class="subject-topics"></div>
        </div>

        <div class="subject-heading-container">
            <div id="selectedSubjectTabHeading"></div>
        </div>

        <div class="sidebar-container">
            <div id="sidebar"></div>
        </div>

        <div class="container-2">
            <div class="symbols-container"></div>

            <div class="main-container">
                {% block subject_features %}
                {% endblock %}

                <div class="results-container">
                    <div id="fooDiv"></div>
                    <div id="finalSolutionHeading"></div>
                    <div class="steps-heading">Steps</div>
                    <div class="steps-container">
<!--                        <div class="step-description">Apply Sum/Diff Rule: $ \left( f \pm g \right)' = f' \pm g' $</div>-->
<!--                        <div class="step-info">$ \displaystyle \frac{d}{dx}\left( 5x^3+3x^2 \right) = \frac{d}{dx}\left( x^3 \right) + \frac{d}{dx}\left( x^2 \right) $</div>-->

<!--                        &lt;!&ndash; E-STEP 1 &ndash;&gt;-->
<!--                        <div id="step-1" class="expandable-step-container">$ \displaystyle \frac{d}{dx}\left( 5x^3 \right) = 15x^2  $<span class="show-steps-span">Show Steps <img class="show-steps-icon" src="{{ url_for('static', filename='img/add.svg') }}"></span></div>-->
<!--                        <div id="step-solution-1" class="expandable-step-solution-container" data-expanded="false">-->
<!--                            <div class="expanded-step-heading">$ \displaystyle \frac{d}{dx}\left( 5x^3 \right) $</div>-->
<!--                            <hr>-->
<!--                            <div class="step-description">Take the constant out: $ \left(n\cdot f \right)' = n\cdot f' $</div>-->
<!--                            <div class="step-info">$ \displaystyle \frac{d}{dx}\left( 5x^3\right) = 5 \frac{d}{dx}\left( x^3 \right) $</div>-->

<!--                            <div class="step-description">Apply the Power Rule: $ \left( x^n  \right)' = nx^{n-1} $</div>-->
<!--                            <div class="step-info">$ \displaystyle 5 \frac{d}{dx}\left( x^3 \right) = 5\cdot 3x^{3-1} $</div>-->

<!--                            <div class="step-description">Simplify</div>-->
<!--                            <div class="step-info">$ \displaystyle 5\cdot 3x^{3-1} = 15x^2 $</div>-->
<!--                        </div>-->

<!--                        &lt;!&ndash; E-Step 2 &ndash;&gt;-->
<!--                        <div id="step-2" class="expandable-step-container">$ \displaystyle \frac{d}{dx}\left( x^2 \right) = 2x  $<span class="show-steps-span">Show Steps <img class="show-steps-icon" src="{{ url_for('static', filename='img/add.svg') }}"></span></div>-->
<!--                        <div id="step-solution-2" class="expandable-step-solution-container" data-expanded="false">-->
<!--                            <div class="expanded-step-heading">$ \displaystyle \frac{d}{dx}\left( x^2 \right) $</div>-->
<!--                            <hr>-->
<!--                            <div class="step-description">Apply the Power Rule: $ \left( x^n  \right)' = nx^{n-1} $</div>-->
<!--                            <div class="step-info">$ \displaystyle \frac{d}{dx}\left( x^2 \right) = 2\cdot x^{2-1} $</div>-->

<!--                            <div class="step-description">Simplify</div>-->
<!--                            <div class="step-info">$ \displaystyle 2\cdot x^{2-1} = 2x $</div>-->

<!--                        </div>-->

                        <!-- Solution -->
<!--                        <div class="final-step">Solution: $ 15x^2+2x $</div>-->


                    </div>

                </div>
            </div>

            {% block body %}
            {% endblock %}
        </div>


    </div>


</body>

<script>
    class StepsUI {
        static displayResult(resultText) {
            let resultContainer = document.querySelector('.results-container')
            let resultDiv = document.createElement('div')
            resultDiv.textContent = resultText
            resultContainer.appendChild(resultDiv)
        }
        static displayStepsHeading() {
            let stepsHeading = document.querySelector('.steps-heading')
            stepsHeading.style.display = 'block'
        }
        static addLatexToElement(element, latexString) {
            katex.render(String.raw`${latexString}`, element, {
                throwOnError: false
            });
        }
        static showAllSteps(solution, enteredExpression) {
            let stepsContainer = document.querySelector('.steps-container')
            let allSimplifications = extractAllSimplificationsFromSolution(solution)
            let stepCounter = 1

            /* Clear any previous steps */
            stepsContainer.innerHTML = ''

            for (let stepNum in solution) {
                let currentStep = new Step(solution[stepNum])


                if (!(currentStep.isFinalStep)) {
                    let latexStepDescriptionSpan = document.createElement('span')
                    let latexStepInfoSpan = document.createElement('span')

                    /* Create step description */
                    let stepDescriptionDiv = document.createElement('div')
                    stepDescriptionDiv.className = 'step-description'
                    stepDescriptionDiv.textContent = `${currentStep.description}: `
                    stepDescriptionDiv.appendChild(latexStepDescriptionSpan)
                    /* Create step info */
                    let stepInfoDiv = document.createElement('div')
                    stepInfoDiv.className = 'step-info'
                    stepInfoDiv.appendChild(latexStepInfoSpan)

                    /* Add step description and step info to stepsContainer */
                    stepsContainer.appendChild(stepDescriptionDiv)
                    stepsContainer.appendChild(stepInfoDiv)


                    /* Add latex */
                    StepsUI.addLatexToElement(latexStepDescriptionSpan, currentStep.result)
                    if (stepCounter === 1) {
                        StepsUI.addLatexToElement(latexStepInfoSpan, `${enteredExpression} = ${currentStep.simplification}`)
                    }
                    else {
                        /* Show the the previous simplification for currentStep step-info */
                        StepsUI.addLatexToElement(latexStepInfoSpan, `${allSimplifications[stepCounter-1]} = ${allSimplifications[stepNum]}`)
                    }

                }
                else {
                    let lastStepInfoDiv = stepsContainer.lastElementChild
                    lastStepInfoDiv.className = 'final-step'
                    lastStepInfoDiv.textContent = 'Solution: '

                    let latexFinalStepSpan = document.createElement('span')

                    lastStepInfoDiv.appendChild(latexFinalStepSpan)

                    StepsUI.addLatexToElement(latexFinalStepSpan, solution[stepCounter])

                }
                stepCounter += 1
            }

        }
        static getUserInput() {
            return document.querySelector('#userInput').value
        }

    }
    class Step {
        constructor(stepDict) {
            if (typeof stepDict === 'object' && typeof stepDict !== null) {
                this.simplification = stepDict['simplification']
                this.step = stepDict['step']
                this.isFinalStep = false
                this.description = this.step.split(': ')[0]
                this.result = this.step.split(': ')[1]

            }
            else {
                this.simplification = stepDict
                this.step = stepDict
                this.isFinalStep = true
            }
        }
    }
    class BaseUI {
        static loadDefaultOptions(defaultSubject) {
            // Load Default Subject Tab
            let defaultSubjectTabBtn = document.querySelector(`#${defaultSubject}SubjectTabBtn`)
            let subjectTopicsContainer = document.querySelector('.subject-topics')
            let subjectOptions = subjectTabsUI.getSubjectOptions()

            subjectOptions[defaultSubject].forEach((topic) => {
                subjectTopicsContainer.innerHTML += `<button class="btn btn-light subject-option-btn">${topic}</button>`
            })
            subjectTabsUI.subjectTabBtnSelected(defaultSubjectTabBtn)
        }
        static loadSymbolsContainer() {

            // <button className="btn btn-light symbol-btn">$ x^2 $</button>
            // <button className="btn btn-light symbol-btn">$ x^{\square} $</button>
            // <button className="btn btn-light symbol-btn">$ \frac{\square}{\square} $</button>

            let symbolsContainer = document.querySelector('.symbols-container')

            let symbolsToAdd = [
                {
                    'symbol': 'x^2',
                    'latex': '\\left( \\right)^2',
                },
                {
                    'symbol': 'x^{\\square}',
                    'latex': '\\left( \\right)^{}',
                },
                {
                    'symbol': '\\log_{\\square}',
                    'latex': '\\log_{}\\left( \\right)',
                },
                {
                    'symbol': '\\sqrt{\\square}',
                    'latex': '\\sqrt{}',
                },
                {
                    'symbol': '\\leq',
                    'latex': '\\leq',
                },
                {
                    'symbol': '\\geq',
                    'latex': '\\geq',
                },
                {
                    'symbol': '\\frac{\\square}{\\square}',
                    'latex': '\\frac{}{}',
                },
                {
                    'symbol': '\\cdot',
                    'latex': '\\cdot',
                },
                {
                    'symbol': '\\div',
                    'latex': '\\div',
                },
                {
                    'symbol': 'x^{\\circ}',
                    'latex': '\\left( \\right)^{\\circ}',
                },
                {
                    'symbol': '\\pi',
                    'latex': '\\pi',
                },
                {
                    'symbol': "(\\square)'",
                    'latex': "\\left( \\right)'",
                },
                {
                    'symbol': '\\frac{d}{dx}',
                    'latex': '\\frac{d}{dx}\\left( \\right)',
                },
                {
                    'symbol': '\\frac{\\partial}{\\partial x}',
                    'latex': '\\frac{\\partial}{\\partial x}\\left( \\right)',
                },
                {
                    'symbol': '\\int',
                    'latex': '\\int',
                },
                {
                    'symbol': '\\iint',
                    'latex': '\\int \\int',
                },
                {
                    'symbol': '\\iiint',
                    'latex': '\\int \\int \\int',
                },
                {
                    'symbol': '\\int_{\\square}^{\\square}',
                    'latex': '\\int_{}^{}',
                },
                {
                    'symbol': '\\lim',
                    'latex': '\\lim_{x \\to 0}\\left( \\right)',
                },
                {
                    'symbol': '\\sum',
                    'latex': '\\sum_{n=1}\\left( \\right)',
                },
                {
                    'symbol': '\\infty',
                    'latex': '\\infty',
                },
                {
                    'symbol': '\\theta',
                    'latex': '\\theta',
                },
                {
                    'symbol': 'f(x)',
                    'latex': 'f(x)',
                },
                {
                    'symbol': '\\ln',
                    'latex': '\\ln\\left( \\right)',
                },
                {
                    'symbol': 'e^{\\square}',
                    'latex': 'e^{}',
                },
                {
                    'symbol': '\\sin',
                    'latex': '\\sin\\left( \\right)',
                },
                {
                    'symbol': '\\cos',
                    'latex': '\\cos\\left( \\right)',
                },
                {
                    'symbol': '\\tan',
                    'latex': '\\tan\\left( \\right)',
                },
                {
                    'symbol': '\\cot',
                    'latex': '\\cot\\left( \\right)',
                },
                {
                    'symbol': '\\csc',
                    'latex': '\\csc\\left( \\right)',
                },
                {
                    'symbol': '\\sec',
                    'latex': '\\sec\\left( \\right)',
                },
                {
                    'symbol': '\\sinh',
                    'latex': '\\sinh\\left( \\right)',
                },
                {
                    'symbol': '\\cosh',
                    'latex': '\\cosh\\left( \\right)',
                },
                {
                    'symbol': '\\tanh',
                    'latex': '\\tanh\\left( \\right)',
                },
                {
                    'symbol': '\\arcsin',
                    'latex': '\\arcsin\\left( \\right)',
                },
                {
                    'symbol': '\\arccos',
                    'latex': '\\arccos\\left( \\right)',
                },
                {
                    'symbol': '\\arctan',
                    'latex': '\\arctan\\left( \\right)',
                },

            ]

            symbolsToAdd.forEach((item) => {
                let symbol = item['symbol']
                let latex = item['latex']

                let symbolButton = document.createElement('button')
                symbolButton.className = 'btn btn-light symbol-btn'
                symbolButton.dataset.latex = latex

                symbolsContainer.appendChild(symbolButton)
                StepsUI.addLatexToElement(symbolButton, symbol)
            })
        }
        static extensionTopicClicked(mainTopic, extensionTopic) {
            let mainHeading = document.querySelector('#selectedSubjectTabHeading')
            let delimiter
            if (extensionTopic !== '')
                delimiter = '→'
            else
                delimiter = ''

            if (mainHeading.innerHTML.includes('topic-extension-heading')) {
                let topicExtensionHeading = document.querySelector('.topic-extension-heading')
                topicExtensionHeading.innerHTML = `${mainTopic}${delimiter}${extensionTopic}`
            }
            else {
                mainHeading.innerHTML += `<span class="topic-extension-heading"> ${mainTopic}${delimiter}${extensionTopic}</span>`
            }

            // mainHeading.innerHTML += `<span class="topic-extension-heading"> ${mainTopic}→${extensionTopic}</span>`




        }
        static getSelectedTopic() {
            let selectedSubjectHeading = document.querySelector('#selectedSubjectTabHeading')
            if (selectedSubjectHeading.children.length !== 0) {
                return selectedSubjectHeading.children[0].textContent.trim()
            }
            else {
                return selectedSubjectHeading.textContent
            }

        }
    }
    class subjectTabsUI {
        static subjectTabBtnSelected(btnObj) {
            let subjectTabHeading = document.querySelector('#selectedSubjectTabHeading')
            let allBtnObjects = document.querySelectorAll('.subject-tab-btn')
            allBtnObjects.forEach((btn) => {
                if (btn !== btnObj) {
                    btn.style.backgroundColor = ''
                }
                else {
                    btn.style.backgroundColor = 'black'
                }
            })
            subjectTabHeading.innerHTML = `${btnObj.textContent}`
            // this.loadSideBarBtn(btnObj.dataset.subject)
            this.loadSideBarBtn2(btnObj.dataset.subject)

        }
        static showSubjectTopics() {
            let subjectOptionsContainer = document.querySelector('.subject-topics')
            subjectOptionsContainer.style.display = 'flex'
            subjectOptionsContainer.style.flexWrap = 'wrap'
        }
        static removeSubjectTopics() {
            let subjectOptionsContainer = document.querySelector('.subject-topics')
            subjectOptionsContainer.style.display = 'none'
        }
        static populateSubjectOptions(Topics) {
            let subjectOptionsDiv = document.querySelector('.subject-topics')

            let htmlToAdd = ''
            Topics.forEach((topic) => {
                htmlToAdd += `<button class="btn btn-light subject-option-btn">${topic}</button>`
            })
            subjectOptionsDiv.innerHTML = htmlToAdd
        }
        static loadSideBarBtn(subject) {
            let sideBar = document.querySelector('.sidebar')
            let subjectTopicsContainer = document.querySelector('.subject-topics')

            let sideBarBtnHtml = ''

            subjectTopicsContainer.childNodes.forEach((btn) => {
                let topic = btn.textContent
                sideBarBtnHtml +=  `
                    <div class="dropdown">
                        <button style="background-color: darkgray; color: black" class="btn btn-secondary dropdown-toggle topics-btn" type="button" id="${topic}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            ${topic}
                        </button>
                        ${subjectTabsUI.getTopicsExtension(subject, topic)}
                    </div>
                `
            })
            sideBar.innerHTML = sideBarBtnHtml
        }
        static loadSideBarBtn2(subject) {
            let sideBar = document.querySelector('#sidebar')
            let subjectTopicsContainer = document.querySelector('.subject-topics')

            let sideBarBtnHtml = ''

            subjectTopicsContainer.childNodes.forEach((btn) => {
                let topic = btn.textContent
                let extensionTopics = this.getTopicsExtension2(subject, topic)

                let extendTopicsSymbol
                let extensionTopicsHtml

                if (extensionTopics.length === 124) {
                    extendTopicsSymbol = '&nbsp;&nbsp;'
                    extensionTopicsHtml = ''
                }
                else {
                    extendTopicsSymbol = '+'
                    extensionTopicsHtml = `
                        <div class="collapse" id="${topic}">
                            <div class="card card-body extension-topics-container">
                                <p style="font-family: 'Trebuchet MS', 'Lucida Sans Unicode', 'Lucida Grande', 'Lucida Sans', Arial, sans-serif;
                                    font-size:small;">
                                    ${extensionTopics}
                                </p>
                            </div>
                        </div>
                    `
                }
                sideBarBtnHtml +=  `
                    <p>
                        <a class="btn btn-light topics-btn" data-toggle="collapse" href="#${topic}" role="button" aria-expanded="false" aria-controls="collapseExample"
                           style="">
                            ${extendTopicsSymbol}&nbsp; ${replaceAll(topic, '-', ' ')}
                        </a>
                    </p>
                    ${extensionTopicsHtml}
                `
            })
            sideBar.innerHTML = sideBarBtnHtml

    }
        static getTopicsExtension2(subject, topic) {
            let topicsExtension = {
                'algebra': {
                    'Basic-Operations': ['Addition', 'Subtraction', 'Multiplication', 'Division'],
                    'Equations': ['Linear', 'Quadratic', 'Logarithmic', 'Exponential'],
                    'Summation': ['Single Summation', 'Double Summation', 'Triple Summation'],
                    'Pi-Product-Notation': ['Single Product', 'Double Product', 'Triple Product'],
                    'Polynomials': ['Properties', 'Add', 'Subtract', 'Multiply', 'Divide', 'Factor'],
                    'Rational-Expressions': ['Add', 'Subtract', 'Multiply', 'Divide', 'LCM', 'Reduce']
                },
                'discreteMath': {
                    'Propositional-Logic': ['Truth Table', 'Logical Equivalence', 'Rules of Inference'],
                    'Set-Theory': ['Cartesian Product', 'Power Sets', 'Union', 'Intersection', 'Difference', 'Symmetric Difference', 'Computer Representation'],
                    'Induction': ['Prove Summation Formulas'],
                    'Number-Theory': ['Division Algorithm', 'Euclidean Algorithm', 'Arithmetic Modulo m', 'Modular Exponentiation', 'Congruences'],
                    'Relations': ['Properties', 'Combining Relations']
                },
                'calculus': {
                    'Limits': ['One Variable', 'Multi Variable', 'One Sided', 'At Infinity', "L'Hopital's Rule", 'Squeeze Theorem'],
                    'Derivatives': ['Sum/Diff Rule', 'Product Rule', 'Quotient Rule', 'Chain Rule', 'First Derivative', 'Higher Order Derivatives', 'Derivative At a Point', 'Partial Derivative', 'Implicit Derivative', 'Second Implicit Derivative', 'Derivative Using Definition'],
                    'Derivative-Applications': ['Equation of Tangent Line', 'Equation of Normal Line', 'Extreme Points', 'Linear Approximation', 'Quadratic Approximation', 'Related Rates', 'Optimization'],
                    'Integrals': ['Indefinite', 'Definite', 'Improper', 'Double Integrals', 'Triple Integrals', 'Numerical Integration'],
                    'Integral-Applications': ['Limit of Sum', 'Area Under Curve', 'Area Between Curves', 'Volume of Solid of Revolution', 'Function Average', 'Arc Length', 'Surface Area'],
                },
                'probability': {
                    'Distributions': ['Normal Distribution', 'Exponential Distributions'],
                    'Expected Value': [''],
                    'Variance': [''],
                    'Bayes Theorem': [''],
                    'Combinations': [''],
                    'Permutations': [''],

                },
                'physics': {
                    'Kinematics': ['1D Kinematics', '2D Kinematics'],
                    'Circular-Motion': ['Centripetal Force', 'Centripetal Velocity', 'Centripetal Acceleration', 'Tension in String', 'Period', 'Frequency'],
                    'Rotational-Motion': ['Angular Displacement', 'Angular Velocity', 'Angular Acceleration', 'Linear/Tangential Velocity', 'Linear/Tangential Acceleration'],
                    'Rotational-Dynamics': ['Torque', 'Moment of Inertia', 'Angular Momentum'],
                    "Newtons-2nd-Law": ['Dynamics Problem'],
                    'Momentum': ['Linear Momentum', 'Angular Momentum'],
                    'Work-and-Energy': ['Conservation of Energy', 'Work Energy Theorem'],
                    'Fluid-Mechanics': ['Properties of Fluids', 'Density', 'Pressure', 'Buoyant Forces', 'Apparent Weight', 'Continuity Equation', "Bernoulli's Equation"],
                    'Temperature-and-KT': ['Convert Between Scales', 'Ideal Gas Law', 'Thermal Expansion', 'Thermal Stress', "Newton's Law of Cooling", 'Relative Humidity', 'Diffusion', 'Kinetic Theory'],
                    'Heat': ['Internal Energy of an Ideal Gas', 'Specific Heat', 'Latent Heat', 'Conduction', 'Radiation'],
                    'Laws-of-Thermodynamics': ['First Law of Thermodynamics', 'Thermodynamic Processes', 'Work', 'Efficiency', 'Coefficient of Performance (COP)', 'Entropy and The Second Law of Thermodynamics']
                }
            }

            let htmlToReturn = ''
            topicsExtension[subject][topic].forEach((extension) => {
                htmlToReturn += `
                    <a class="topic-extension-item">${extension}</a>
                    <br>
                    <br>
                `
            })
            return htmlToReturn


        }
        static getTopicsExtension(subject, topic) {
            switch (subject) {
                case 'algebra':
                    switch (topic) {
                        case 'Basic Operations':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}"></div>
                            `
                        case 'Equations':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Logarithmic</a>
                                    <a class="dropdown-item" href="#">Exponential</a>
                                    <a class="dropdown-item" href="#">Linear</a>
                                    <a class="dropdown-item" href="#">Radical</a>
                                </div>
                            `
                        case 'Summation':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Double Summation</a>
                                    <a class="dropdown-item" href="#">Triple Summation</a>
                                </div>
                            `
                        case 'Pi (Product Notation)':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">

                                </div>
                            `
                        case 'Polynomials':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Properties</a>
                                    <a class="dropdown-item" href="#">Add</a>
                                    <a class="dropdown-item" href="#">Subtract</a>
                                    <a class="dropdown-item" href="#">Multiply</a>
                                    <a class="dropdown-item" href="#">Divide</a>
                                    <a class="dropdown-item" href="#">Factor</a>
                                    <a class="dropdown-item" href="#">LCM</a>
                                </div>
                            `
                        case 'Rational Expressions':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Add</a>
                                    <a class="dropdown-item" href="#">Subtract</a>
                                    <a class="dropdown-item" href="#">Multiply</a>
                                    <a class="dropdown-item" href="#">Reduce</a>
                                </div>
                            `
                    }
                    break
                case 'discreteMath':
                    switch (topic) {
                        case 'Propositional Logic':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">

                                </div>
                            `
                        case 'Rules of Inference':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">

                                </div>
                            `
                        case 'Set Theory':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Cartesian Product</a>
                                    <a class="dropdown-item" href="#">Power sets</a>
                                    <a class="dropdown-item" href="#">Union</a>
                                    <a class="dropdown-item" href="#">Intersection</a>
                                    <a class="dropdown-item" href="#">Difference</a>
                                    <a class="dropdown-item" href="#">Symmetric Difference</a>
                                    <a class="dropdown-item" href="#">Computer Representation</a>
                                </div>
                            `
                        case 'Induction':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">

                                </div>
                            `
                        case 'Number Theory':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Division Algorithm</a>
                                    <a class="dropdown-item" href="#">Euclidean Algorithm</a>
                                    <a class="dropdown-item" href="#">Modular Arithmetic</a>
                                    <a class="dropdown-item" href="#">Modular Exponentiation</a>
                                    <a class="dropdown-item" href="#">Congruences</a>
                                </div>
                            `
                        case 'Relations':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Properties</a>
                                    <a class="dropdown-item" href="#">Combining Relations</a>
                                </div>
                            `


                    }
                    break
                case 'calculus':
                    switch (topic) {
                        case 'Limits':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">One Variable</a>
                                    <a class="dropdown-item" href="#">Multi Variable</a>
                                    <a class="dropdown-item" href="#">One Sided</a>
                                    <a class="dropdown-item" href="#">At Infinity</a>
                                    <a class="dropdown-item" href="#">L'Hoptial's Rule</a>
                                    <a class="dropdown-item" href="#">Squeeze Theorem</a>
                                </div>
                            `
                        case 'Derivatives':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Sum/Diff Rule</a>
                                    <a class="dropdown-item" href="#">Product Rule</a>
                                    <a class="dropdown-item" href="#">Quotient Rule</a>
                                    <a class="dropdown-item" href="#">Chain Rule</a>
                                    <a class="dropdown-item" href="#">First Derivative</a>
                                    <a class="dropdown-item" href="#">Higher Order Derivatives</a>
                                    <a class="dropdown-item" href="#">Derivative At a Point</a>
                                    <a class="dropdown-item" href="#">Partial Derivative</a>
                                    <a class="dropdown-item" href="#">Implicit Derivative</a>
                                    <a class="dropdown-item" href="#">Second Implicit Derivative</a>
                                    <a class="dropdown-item" href="#">Derivative Using Definition</a>
                                </div>
                            `
                        case 'Derivative Applications':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Equation of Tangent Line</a>
                                    <a class="dropdown-item" href="#">Equation of Normal Line</a>
                                    <a class="dropdown-item" href="#">Extreme Points</a>
                                    <a class="dropdown-item" href="#">Linear Approximation</a>
                                    <a class="dropdown-item" href="#">Quadratic Approximation</a>
                                </div>
                            `
                        case 'Integrals':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Indefinite</a>
                                    <a class="dropdown-item" href="#">Definite</a>
                                    <a class="dropdown-item" href="#">Improper</a>
                                    <a class="dropdown-item" href="#">Double Integrals</a>
                                    <a class="dropdown-item" href="#">Triple Integrals</a>
                                </div>
                            `
                        case 'Integral Applications':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Limit of Sum</a>
                                    <a class="dropdown-item" href="#">Area Under Curve</a>
                                    <a class="dropdown-item" href="#">Area Between Curves</a>
                                    <a class="dropdown-item" href="#">Volume of Solid of Revolution</a>
                                    <a class="dropdown-item" href="#">Function Average</a>
                                    <a class="dropdown-item" href="#">Arc Length</a>
                                </div>
                            `
                    }
                    break
                case 'probability':
                    switch (topic) {
                        case 'Combinations':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">

                                </div>
                            `
                        case 'Permutations':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">

                                </div>
                            `
                    }
                    break
                case 'physics':
                    switch (topic) {
                        case 'Kinematics':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">ID Kinematics</a>
                                    <a class="dropdown-item" href="#">2D Kinematics</a>
                                </div>
                            `
                        case 'Circular Motion':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Centripetal Force</a>
                                    <a class="dropdown-item" href="#">Centripetal Velocity</a>
                                    <a class="dropdown-item" href="#">Centripetal Acceleration</a>
                                    <a class="dropdown-item" href="#">Tension in String</a>
                                    <a class="dropdown-item" href="#">Period</a>
                                    <a class="dropdown-item" href="#">Frequency</a>
                                </div>
                            `
                        case 'Rotational Motion':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Angular Displacement</a>
                                    <a class="dropdown-item" href="#">Angular Velocity</a>
                                    <a class="dropdown-item" href="#">Angular Acceleration</a>
                                    <a class="dropdown-item" href="#">Linear/Tangental Velocity</a>
                                    <a class="dropdown-item" href="#">Linear/Tangental/ Acceleration</a>
                                </div>
                            `
                        case 'Rotational Dynamics':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Torque</a>
                                    <a class="dropdown-item" href="#">Moment of Inertia</a>
                                    <a class="dropdown-item" href="#">Angular Momentum</a>
                                </div>
                            `
                        case "Newton's 2nd Law":
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Dynamics Problem</a>
                                </div>
                            `
                        case 'Momentum':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Linear Momentum</a>
                                    <a class="dropdown-item" href="#">Angular Momentum</a>
                                </div>
                            `
                        case 'Work and Energy':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Conservation of Energy</a>
                                    <a class="dropdown-item" href="#">Work Energy Theorem</a>
                                </div>
                            `
                        case 'Fluid Mechanics':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Properties of Fluids</a>
                                    <a class="dropdown-item" href="#">Density</a>
                                    <a class="dropdown-item" href="#">Pressure</a>
                                    <a class="dropdown-item" href="#">Buoyant Forces</a>
                                    <a class="dropdown-item" href="#">Apparent Weight</a>
                                    <a class="dropdown-item" href="#">Continuity Equation</a>
                                    <a class="dropdown-item" href="#">Bernoulli's Equation</a>
                                </div>
                            `
                        case 'Temperature and KT':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Convert Between Scales</a>
                                    <a class="dropdown-item" href="#">Ideal Gas Law</a>
                                    <a class="dropdown-item" href="#">Thermal Expansion</a>
                                    <a class="dropdown-item" href="#">Thermal Stress</a>
                                    <a class="dropdown-item" href="#">Newton's Law of Cooling</a>
                                    <a class="dropdown-item" href="#">Relative Humidity</a>
                                    <a class="dropdown-item" href="#">Diffusion</a>
                                    <a class="dropdown-item" href="#">Kinetic Theory</a>
                                </div>
                            `
                        case 'Heat':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">Internal Energy of an Ideal Gas</a>
                                    <a class="dropdown-item" href="#">Specific Heat</a>
                                    <a class="dropdown-item" href="#">Latent Heat</a>
                                    <a class="dropdown-item" href="#">Conduction</a>
                                    <a class="dropdown-item" href="#">Radiation</a>
                                    <a class="dropdown-item" href="#">Squeeze Theorem</a>
                                </div>
                            `
                        case 'Laws of Thermodynamics':
                            return `
                                <div style="background-color: #e0dddd" class="dropdown-menu" aria-labelledby="${topic}">
                                    <a class="dropdown-item" href="#">First Law of Theromodynamics</a>
                                    <a class="dropdown-item" href="#">Thermodynamic Processes</a>
                                    <a class="dropdown-item" href="#">Work</a>
                                    <a class="dropdown-item" href="#">Efficiency</a>
                                    <a class="dropdown-item" href="#">Coefficient of Performance (COP)</a>
                                    <a class="dropdown-item" href="#">Entropy and The Second Law of Thermodynamics</a>
                                </div>
                            `

                    }


            }
            return ''

        }
        static getSubjectOptions() {
            return {
                'algebra': ['Basic-Operations', 'Equations', 'Summation', 'Pi-Product-Notation', 'Polynomials', 'Rational-Expressions'],
                'discreteMath': ['Propositional-Logic', 'Set-Theory', 'Induction', 'Number-Theory', 'Relations'],
                'calculus': ['Limits', 'Derivatives', 'Derivative-Applications', 'Integrals', 'Integral-Applications'],
                'probability': ['Distributions', 'Expected Value', 'Variance', "Bayes Theorem", 'Combinations', 'Permutations'],
                'physics': ['Kinematics', 'Circular-Motion', 'Rotational-Motion', 'Rotational-Dynamics', "Newtons-2nd-Law", 'Momentum', 'Work-and-Energy', 'Fluid-Mechanics', 'Temperature-and-KT', 'Heat', 'Laws-of-Thermodynamics'],
            }
        }
        
    }
    class Animations {
        static animateShowSteps(stepContainer) {
            // stepContainer.style.display = 'block'
            stepContainer.overflow = 'auto'
            stepContainer.style.animationName = 'stepExpanded'
            stepContainer.style.animationDuration = '0.5s'
            stepContainer.style.animationFillMode = 'forwards'
            stepContainer.dataset.expanded = 'true'

            stepContainer.addEventListener('animationend', () => {
                // stepContainer.overflow = 'auto'
                // stepContainer.style.display = 'block'
            })
        }
        static animateHideSteps(stepContainer) {
            stepContainer.style.animationName = 'stepCollapsed'
            stepContainer.style.animationDuration = '0.5s'
            stepContainer.style.animationFillMode = 'forwards'
            stepContainer.dataset.expanded = 'false'

            stepContainer.addEventListener('animationend', () => {
                // stepContainer.style.overflow = 'hidden'
            })
        }
    }


    document.addEventListener('DOMContentLoaded', () => {

        // BaseUI.loadDefaultOptions('algebra')
        let foo = document.querySelector('#fooDiv')
        // StepsUI.addLatexToElement(foo, '\\text{Apply Sum/Diff Rule:}\\ 5x^2')
        BaseUI.loadSymbolsContainer()


    })

    /* ONCLICK EVENTS */

    // Show Steps



    // document.querySelector('#step-1').addEventListener('click', () => {
    //     let stepContainer = document.querySelector('#step-solution-1')
    //
    //     if (stepContainer.dataset.expanded === 'false') {
    //         stepContainer.style.overflow = 'auto'
    //         Animations.animateShowSteps(stepContainer)
    //     }
    //     else {
    //         Animations.animateHideSteps(stepContainer)
    //         $(stepContainer).animate({ scrollTop: 0 }, "fast");
    //         stepContainer.style.overflow = 'hidden'
    //     }
    // })

    // Subject Tabs
    document.querySelector('.subject-tabs').addEventListener('click', (e) => {
        if (e.target.classList.contains('subject-tab-btn')) {
            let subject = e.target.textContent
            let routes = {
                'Algebra': '/algebra',
                'Discrete Math': '/discrete_math',
                'Calculus': '/calculus',
                'Probability': '/probability',
                'Physics': '/physics',
            }
            window.location.href = routes[subject]
            // subjectTabsUI.subjectTabBtnSelected(e.target)
            // console.log('after')

        }
    })
    // Topic Extension Item
    document.querySelector('#sidebar').addEventListener('click', (e) => {
        if (e.target.classList.contains('topics-btn')) {
            let mainTopic = e.target.textContent
            mainTopic = replaceAll(replaceAll(mainTopic.trim(), '\\n', ''), '+ ', '')
            BaseUI.extensionTopicClicked(mainTopic, '')
        }
        if (e.target.className === 'topic-extension-item') {
            let extensionTopic = e.target.textContent
            let mainTopic = e.target.parentElement.parentElement.parentElement.previousElementSibling.textContent
            mainTopic = replaceAll(replaceAll(mainTopic.trim(), '\\n', ''), '+ ', '')
            BaseUI.extensionTopicClicked(mainTopic, extensionTopic)
        }
    })


    /* ON-HOVER EVENTS */

    // Subject Tabs
    document.querySelector('.subject-tabs').addEventListener('mouseover', (e) => {
        let subjectOptionsDiv = document.querySelector('.subject-topics')

        if (e.target.classList.contains('subject-tab-btn')) {
            let btnObj = e.target
            let btnSubjectPos = {
                'algebra': '275px',
                'discreteMath': '340px',
                'calculus': '455px',
                'probability': '535px',
                'physics': '625px',
            }
            let subjectOptions = subjectTabsUI.getSubjectOptions()

            switch (btnObj.textContent) {
                case "Algebra":
                    subjectOptionsDiv.style.left = btnSubjectPos['algebra']
                    subjectTabsUI.populateSubjectOptions(subjectOptions['algebra'])
                    break
                case "Discrete Math":
                    subjectOptionsDiv.style.left = btnSubjectPos['discreteMath']
                    subjectTabsUI.populateSubjectOptions(subjectOptions['discreteMath'])
                    break
                case "Calculus":
                    subjectOptionsDiv.style.left = btnSubjectPos['calculus']
                    subjectTabsUI.populateSubjectOptions(subjectOptions['calculus'])
                    break
                case "Probability":
                    subjectOptionsDiv.style.left = btnSubjectPos['probability']
                    subjectTabsUI.populateSubjectOptions(subjectOptions['probability'])
                    break
                case "Physics":
                    subjectOptionsDiv.style.left = btnSubjectPos['physics']
                    subjectTabsUI.populateSubjectOptions(subjectOptions['physics'])
                    break

            }
        }
    })
    // Container-1
    document.querySelector('.heading-container').addEventListener('mouseover', (e) => {
        if (e.target.classList.contains('subject-option-btn') || e.target.classList.contains('subject-tab-btn') || e.target.className === 'subject-topics') {
            subjectTabsUI.showSubjectTopics()
        }
        else {
            subjectTabsUI.removeSubjectTopics()
        }
    })

    function extractAllSimplificationsFromSolution(solution) {
        let allSimplifications = {}
        let i = 1
        for (let stepNum in solution) {
            allSimplifications[stepNum] = solution[stepNum]['simplification']

        }
        return allSimplifications

    }
    function escapeRegExp(string) {
        return string.replace(/[.*+\-?^${}()|[\]\\]/g, '\\$&'); // $& means the whole matched string
    }
    function replaceAll(str, find, replace) {
        return str.replace(new RegExp(escapeRegExp(find), 'g'), replace);
    }



</script>

<!--<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>-->
<!--<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>-->
<!--<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>-->
<!--<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>-->
<!--<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>-->

{% block script %}
{% endblock %}

</html>